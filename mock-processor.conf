server {
    listen 80;
    server_name localhost;

    # Mock payment processor endpoint
    location /payments {
        if ($request_method = POST) {
            return 200 '{"status":"success"}';
        }
        return 405 '{"error":"Method not allowed"}';
        add_header Content-Type application/json;
    }

    # Mock service health endpoint
    location /payments/service-health {
        return 200 '{"status":"healthy","timestamp":"$time_iso8601"}';
        add_header Content-Type application/json;
    }

    # Default health check
    location /health {
        return 200 '{"status":"ok"}';
        add_header Content-Type application/json;
    }

    # Handle other requests
    location / {
        return 404 '{"error":"Not found"}';
        add_header Content-Type application/json;
    }
}